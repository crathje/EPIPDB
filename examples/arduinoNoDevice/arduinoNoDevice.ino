#include <Arduino.h>

#include <EPIPDB.h>
EPIPDB EPIPDB;

uint8_t _EP_DB_SAMPLEFRAME[] = { 0xEB, 0x90, 0xEB, 0x90, 0xEB, 0x90, 0x01, 0xA0, 0x22, 0x93, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x33, 0x33, 0x00, 0x01, 0x01, 0x32, 0x19, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x01, 0x00, 0x00, 0x50, 0x04, 0x98, 0x05, 0x98, 0x05, 0x30, 0x03, 0x27, 0x8F, 0x7F, 0x00, 0x00, 0x00, 0x00 };

void setup() {
  Serial.begin(115200);
  delay(250);
}

void loop() {
  // reuest data to serial port (just to show it)
  EPIPDB.request(Serial);

  // fake a response
  for (int i = 0; i < sizeof(_EP_DB_SAMPLEFRAME); i++) {
    EPIPDB.handle(_EP_DB_SAMPLEFRAME[i]);
  }

  // in case a valid frame has been received, show it
  if (EPIPDB.getValidAge() < 1000) {
    EPIPDB.print2serial(Serial);
  }

  delay(1000);
}
